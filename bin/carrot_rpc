#!/usr/bin/env ruby

require_relative '../lib/carrot_rpc'
require_relative '../lib/carrot_rpc/cli'
require_relative '../lib/carrot_rpc/server_runner'

CarrotRpc::CLI.parse_options(ARGV)

config = CarrotRpc.configuration
runner = CarrotRpc::ServerRunner.new(rails_path: config.rails_path, pidfile: config.pidfile,
                                     runloop_sleep: config.runloop_sleep, daemonize: config.daemonize)
runner.run!
